<!doctype html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>صورتحساب ماهک</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css"
          integrity="sha384-dpuaG1suU0eT09tx5plTaGMLBsfDLzUCCUXOY2j/LSvXYuG6Bqs43ALlhIqAJVRb" crossorigin="anonymous">
    <style>
        :root {
            font-size: 12px;
        }

        @font-face {
            font-family: 'font';
            src: url('font-regular.ttf');
            font-style: normal;
            font-weight: normal;
        }

        body {
            font-family: 'font', Arial;
        }

        table {
            width: 100%
        }

        th {
            font-size: 1rem;
            font-weight: bold;
        }

        td {
            border: thin solid;
        }

        input {
            width: 100%;
            text-align: center;
        }

        @media print {
            input {
                border: none;
                background: none;
            }
        }
    </style>
</head>
<body>
<div class="container py-2" id="app-container">
    <div class="text-center">
        <div>لوازم التحریر</div>
        <h1>ماهک</h1>
        <table>
            <thead>
            <tr>
                <th>ردیف</th>
                <th>عنوان</th>
                <th>تعداد</th>
                <th>قیمت</th>
                <th>مجموع</th>
            </tr>
            </thead>
            <tbody v-if="items">
            <tr v-for="(x,k) in items">
                <td>{{k + 1}}</td>
                <td><input type="text" v-model="x.title" class="text-start"/></td>
                <td><input type="tel" v-model="x.count"/></td>
                <td><input type="tel" v-model="x.price"/></td>
                <td>{{thousandSeparator(Math.ceil((x.price || 0) * (x.count || 1)))}}</td>
            </tr>
            </tbody>
            <tfoot>
            <tr class="border-top">
                <th colspan="4" class="text-start">مجموع</th>
                <td>
                    {{thousandSeparator(items.reduce((p, c) => p + Math.ceil((c.count || 1) * (c.price || 0)), 0) || 0)}}
                </td>
            </tr>
            </tfoot>
        </table>
        <div class="mt-5 text-center d-print-none">
            <hr/>
            <button class="btn btn-primary" @click="addNewItem">
                افزودن سطر جدید
            </button>
        </div>
        <hr/>
        <div class="mt-4 text-center">
            نوشت افزار و اسباب بازی<br/>
            پیام به ادمین: @mahak_tahrir<br/>
            آدرس: گیلان، رودسر (سیدمحمدی)<br/>
            تلفن: ۰۹۳۷۸۱۰۲۷۱۷<br/>
            پیج اینستاگرام: mahaktahrir@<br/>
        </div>
    </div>
</div>
<script>
    function onVueLoad() {
        const app = Vue.createApp({
            data: () => ({
                items: [{count: 1}]
            }),
            methods: {
                addNewItem() {
                    this.items.push({count: 1});
                },
                thousandSeparator(input) {
                    return input.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                }
            }
        });
        app.mount('#app-container')
    }
</script>
<!--<script src="https://unpkg.com/vue@3/dist/vue.global.js" async onload="onVueLoad()"></script>-->
<script src="/vue.global.js" async onload="onVueLoad()"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>